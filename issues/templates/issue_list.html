
{% extends 'base.html' %}

{% block content %}

<div class="master" style>
    <div class = "wrapper issues lightbox-generic-form">
         
       <tg-project-menu>
        <div class="sticky-project-menu"></div>
       </tg-project-menu>
       
        <div class="main issue-main">
            <div class="issue-top">
                <header class="issue-header">
                    <h1>
                        <span>Issues</span>
                    </h1>
                    <div class="taskboard-actions">
                        <div class="issue-table-options-start" >
                            <button class="btn-filter" onclick="myFunction()">
                                <img src="   https://cdn-icons-png.flaticon.com/512/10035/10035140.png " width="15" height="15" alt="" title="" class="img-small" >
                                <span class="text" style="margin: 5px;">Filters</span>
                            </button>
                            <div>
                                <input class="ng-pristine ng-valid ng-empty ng-touched">
                            </div>
                            
                        </div>
                        <div class="new-issue">
                            <button class="btn-small" >
                                <a href="/issues/create/" style="color:black"> New Issue</a>
                            </button>
                        </div>
                    </div>
                </header>
            </div>
            <div class="issue-container">
                
                <sidebar class="filters-bar" id="filtres" style="display:none" >
                    <div>
                        <div class="filters-step-cat">
                            <div class="filters-advanced">
                                <div class="filters-advanced-form">
                                    <div class="custom-radio"></div>
                                    <div class="custom-radio"></div>
                                </div>
                            </div>
                            <div class="filters-cat">
                                <div class="filters-applied">
                                    <div class="filters-included">
                                        <div class="filters-title">Filtrat per:</div>
                                        <div class="filters-wrapper"></div>
                                    </div>
                                </div>
                                <ul>
                                    <li>
                                        <button class="filters-cat-single"  id="categoria_filtre_tipus" name = "obre"onclick="filtre_tipus('filtre_tipus')" style="display: flex">
                                            <span>Tipus</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: block">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_tipus_selected" onclick="filtre_tipus('filtre_tipus')" style="display: none">
                                            <span>Tipus</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                            
                                        </button>
                                        <div class="filter-list" style="display:none"  name="tanca"  id="filtre_tipus" style="display:flex ; flex-direction: column";>
                                            <div>
                                                <button class="single-filter single-filter-type-general"style="border-color: rgb(228, 64, 87); width:100%">
                                                    <span class="name" >Bug</span>
                                                    
                                                    <span class="number"></span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(81, 120, 211)">
                                                    <span class="name">Pregunta</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(64, 228, 206)">
                                                    <span class="name" >Millora</span>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        
                                    </li>
                                    <li>
                                        <button class="filters-cat-single" id="categoria_filtre_gravetat" name = "obre"onclick="filtre_tipus('filtre_gravetat')">
                                            <span>Gravetat</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                            
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_gravetat_selected" onclick="filtre_tipus('filtre_gravetat')" style="display:none">
                                            <span>Gravetat</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                            
                                        </button>
                                        <div class="filter-list" style="display:none" name="tanca"id="filtre_gravetat">
                                            <div>
                                                <button class="single-filter single-filter-type-general"style="border-color: rgb(112, 114, 143); width:100%">
                                                    <span class="name" >Desitjada</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(64, 168, 228);">
                                                    <span class="name">Menor</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(64, 228, 124);">
                                                    <span class="name" >Normal</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(228, 162, 64);">
                                                    <span class="name">Important</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(211, 84, 80);">
                                                    <span class="name" >Cr√≠tica</span>
                                                </button>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <button class="filters-cat-single" id="categoria_filtre_prioritat" name = "obre"onclick="filtre_tipus('filtre_prioritat')">
                                            <span>Prioritat</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_prioritat_selected" onclick="filtre_tipus('filtre_prioritat')" style="display:none">
                                            <span>Prioritat</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                            
                                        </button>
                                        <div class="filter-list" style="display:none" name="tanca"id="filtre_prioritat">
                                            <div>
                                                <button class="single-filter single-filter-type-general"style="border-color: rgb(168, 228, 64); width:100%">
                                                    <span class="name" >Baixa</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(228, 206, 64);">
                                                    <span class="name">Mitja</span>
                                                </button>
                                                <button class="single-filter single-filter-type-general" style="border-color: rgb(228, 124, 64);">
                                                    <span class="name" >Alta</span>
                                                </button>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <button class="filters-cat-single" id="categoria_filtre_estat" name = "obre"onclick="filtre_tipus('filtre_estat')">
                                            <span>Estat</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_estat_selected" onclick="filtre_tipus('filtre_estat')" style="display:none">
                                            <span>Estat</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                            
                                        </button>
                                        <div class="filter-list" style="display:none" name="tanca"id="filtre_estat">
                                            <div>
                                            <button class="single-filter single-filter-type-general"style="border-color: rgb(112, 114, 143);; width:100%">
                                                <span class="name" >Nova</span>
                                            </button>
                                            <button class="single-filter single-filter-type-general" style="border-color: rgb(64, 168, 228);;">
                                                <span class="name">En curs</span>
                                            </button>
                                            <button class="single-filter single-filter-type-general" style="border-color: rgb(228, 206, 64);">
                                                <span class="name" >Testejar</span>
                                            </button>
                                            <button class="single-filter single-filter-type-general" style="border-color: rgb(168, 228, 64);">
                                                <span class="name">Tancada</span>
                                            </button>
                                            <button class="single-filter single-filter-type-general" style="border-color: rgb(228, 64, 87);">
                                                <span class="name" >Necessita informaci√≥</span>
                                            </button>
                                            <button class="single-filter single-filter-type-general" style="border-color: rgb(169, 170, 188);">
                                                <span class="name">Rebutjada</span>
                                            </button>
                                            <button class="single-filter single-filter-type-general" style="border-color: rgb(81, 120, 211);">
                                                <span class="name" >Proposada</span>
                                            </button>
                                        </div>
                                        </div>
                                    </li>
                                    <li>
                                        <button class="filters-cat-single" id="categoria_filtre_assignat" name = "obre"onclick="filtre_tipus('filtre_assignat')">
                                            <span>Assignat a</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_assignat_selected" onclick="filtre_tipus('filtre_assignat')" style="display:none">
                                            <span>Assignat a</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <div class="filter-list" style="display:none" name="tanca"id="filtre_assignat">
                                            
                                        </div>
                                    </li>
                                    <li>
                                        <button class="filters-cat-single" id="categoria_filtre_rol" name = "obre"onclick="filtre_tipus('filtre_rol')">
                                            <span>Tags</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_rol_selected" onclick="filtre_tipus('filtre_rol')" style="display:none">
                                            <span>Tags</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                            
                                        </button>
                                        <div class="filter-list" style="display:none" name="tanca"id="filtre_rol">
                                            
                                        </div>
                                    </li>
                                    <li>
                                        <button class="filters-cat-single" id="categoria_filtre_creat" name = "obre"onclick="filtre_tipus('filtre_creat')">
                                            <span>Creat per</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-right" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/271/271228.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                        </button>
                                        <button class="filters-cat-single selected" name="tanca"id="categoria_filtre_creat_selected" onclick="filtre_tipus('filtre_creat')" style="display:none">
                                            <span>Creat per</span>
                                            <div class="ng-animate-disabled">
                                                <svg class="icon icon-arrow-down" style="fill: cred">
                                                    <img src="   https://cdn-icons-png.flaticon.com/512/9589/9589774.png " width="10" height="10" alt="" title="" class="img-small">
                                                </svg>
                                            </div>
                                            
                                        </button>
                                        <div class="filter-list" style="display:none" name="tanca"id="filtre_creat">
                                            
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </sidebar>
                <div class="issue-page"style="width: 100%;">
                   <table class="issues-table" style="width: 100%;border-collapse:separate; border-spacing: 0 10px;">
                        <tr class="row title">
                            <td class="level-field">
                                <span class="wide">Tipus</span>
                                
                            </td>
                            <td class="level-field">
                                <span class="wide">Gravetat</span>
                            </td>
                            <td class="level-field">
                                <span class="wide">Prioritat</span>
                            </td>
                            <td class="subject">
                                <span class="wide">Issue</span>
                            </td>
                            <td class="issue-field"></td>
                            <td class="modified-field"></td>
                            <td class="assigned-field"></td>
                        </tr>
                        {% for issue in issues %}
                            <tr class="row table-main" style="height: 80px;">
                            
                                <td class="level-field" style="padding-left: 20px;padding-right: 20px; text-align: center;
                                vertical-align: middle">
                                        {% if issue.tipus == "B" %}
                                            <div class="level" style="background: rgb(228, 64, 87)"></div>
                                        {%elif issue.tipus == "P"%}
                                            <p class="level" style="background: rgb(81, 120, 211)"></p>
                                        {%elif issue.tipus == "M"%}
                                            <p class="level" style="background:  rgb(64, 228, 206)"></p>
                                        {%endif%}
                                      
                                </td>
                                
                                 <td class="level-field" style="padding-right: 20px;text-align: center;
                                 vertical-align: middle;">
                                    {% if issue.gravetat == "D" %}
                                        <div class="level" style="background: rgb(112, 114, 143)"></div>
                                    {%elif issue.gravetat == "M"%}
                                        <p class="level" style="background: rgb(64, 168, 228)"></p>
                                    {%elif issue.gravetat == "N"%}
                                        <p class="level" style="background:  rgb(64, 228, 124)"></p>
                                    {%elif issue.gravetat == "I"%}
                                        <p class="level" style="background:  rgb(228, 162, 64)"></p>
                                    {%elif issue.gravetat == "C"%}
                                        <p class="level" style="background:   rgb(211, 84, 80)"></p>
                                    {%endif%}
                                    
                                 </td>
                                 
                                 <td class="level-field" style="padding-right: 20px;text-align: center;
                                 vertical-align: middle;">
                                        {% if issue.prioritat == "B" %}
                                            <p class="level" style="background: rgb(168, 228, 64);"></p>
                                        {%elif issue.prioritat == "M"%}
                                            <p class="level" style=" background: rgb(228, 206, 64);;"></p>
                                        {%elif issue.prioritat == "A"%}
                                            <p class="level" style="background:  rgb(228, 124, 64);"></p>
                                        {%endif%}
                                </td>
                            
                                <td class="subject" style="text-align: center;
                                vertical-align: middle;">
                                    
                                    <a href="/issues/{{issue.id}}" >
                                        <span classe="issue-text" style="display: inline-flex;">
                                            <span class="issue-ref">#{{issue.id}}</span>
                                            <span class="issue-subject">{{issue.subject}}</span>
                                        </span>
                                        
                                    </a> 
                                </td>
                                
                                <td style="text-align: center;
                                vertical-align: middle;">
                                    <div class="assigned-field" >
                                    
                                    {%if issue.estat == 'C'%}
                                        <span style="color:#70b578">{{issue.get_estat_display}}</span>
                                    {%elif issue.estat == 'R'%}
                                        <span style="color:#FF0000">{{issue.get_estat_display}}</span>
                                    {%else %}
                                        <span>{{issue.get_estat_display}}</span>
                                    {%endif%} 
                                    </div>
                                </td>
                                
                                <td class="modified-field" style="text-align: center;
                                vertical-align: middle;">
                                    <span>{{issue.dataModificacio}}</span>
                                </td>
                                
                                <td class="assigned-field" style="text-align: center;
                                vertical-align: middle;">   
                                    <span class="issue-assignedto">{{issue.assignacio.user.username}}</span>
                                </td>
                                
                            </tr> 
                        {% endfor %}

                    </table>
                </div>
            </div>
</div>
</div>

    
    <script type="text/javascript">
        function myFunction() {
  var x = document.getElementById("filtres");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
    
  }
}

function tanca_tot(param1){
    var tanca = document.getElementsByName("tanca"); //divsToHide is an array
    for(var i = 0; i < tanca.length; i++){
        if(tanca[i].id != param1)
        tanca[i].style.display= "none"; // or
        //divsToHide[i].style.display = "none"; // depending on what you're doing
    }
    var obre = document.getElementsByName("obre");
    for(var i = 0; i < obre.length; i++){
        if(obre[i].id != param1)
        obre[i].style.display= "flex"; // or
        //divsToHide[i].style.display = "none"; // depending on what you're doing
    }
}

function filtre_tipus(param1) {
    
    
    if(param1 == "filtre_tipus"){
        var x = document.getElementById("filtre_tipus");
        var y = document.getElementById("categoria_filtre_tipus");
        var z = document.getElementById("categoria_filtre_tipus_selected")
    }
    if(param1 == "filtre_gravetat"){
        var x = document.getElementById("filtre_gravetat");
        var y = document.getElementById("categoria_filtre_gravetat");
        var z = document.getElementById("categoria_filtre_gravetat_selected")
    }
    if(param1 == "filtre_prioritat"){
        var x = document.getElementById("filtre_prioritat");
        var y = document.getElementById("categoria_filtre_prioritat");
        var z = document.getElementById("categoria_filtre_prioritat_selected")
    }
    if(param1 == "filtre_estat"){
        var x = document.getElementById("filtre_estat");
        var y = document.getElementById("categoria_filtre_estat");
        var z = document.getElementById("categoria_filtre_estat_selected")
    }
    if(param1 == "filtre_assignat"){
        var x = document.getElementById("filtre_assignat");
        var y = document.getElementById("categoria_filtre_assignat");
        var z = document.getElementById("categoria_filtre_assignat_selected")
    }
    if(param1 == "filtre_rol"){
        var x = document.getElementById("filtre_rol");
        var y = document.getElementById("categoria_filtre_rol");
        var z = document.getElementById("categoria_filtre_rol_selected")
    }
    if(param1 == "filtre_creat"){
        var x = document.getElementById("filtre_creat");
        var y = document.getElementById("categoria_filtre_creat");
        var z = document.getElementById("categoria_filtre_creat_selected")
    }

  
  if (y.style.display === "none") {
    tanca_tot(param1);
    x.style.display = "none";
    y.style.display = "flex";
    z.style.display = "none";
    
  } else {
    tanca_tot(param1);
    x.style.display = "flex";
    y.style.display = "none";
    z.style.display = "flex";
    
  }
}



        </script>
{% endblock %}